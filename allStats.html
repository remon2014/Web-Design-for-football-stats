<?php
  include 'FootballData.php';
  date_default_timezone_set("Europe/London");
  include 'allStats.php'
?>
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>All stats</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <style>
  /* Remove the navbar's default margin-bottom and rounded borders */
  .navbar {
    margin-bottom: 0;
    border-radius: 0;
  }

  /* Style to reverse the caret icon from pointing downwards to upwards */
  .caret.caret-up {
    border-top-width: 0;
    border-bottom: 4px solid #fff;
  }
  /* Set height of the grid so .sidenav can be 100% (adjust as needed) */
  .row.content {height: 450px}

  /* Set gray background color and 100% height */
  .sidenav {
    padding-top: 20px;
    background-color: #f1f1f1;
    height: 100%;
  }

  /* Set black background color, white text and some padding */
  footer {
    background-color: #555;
    color: white;
    padding: 15px;
  }

  /* On small screens, set height to 'auto' for sidenav and grid */
  @media screen and (max-width: 767px) {
    .sidenav {
      height: auto;
      padding: 15px;
    }
    .row.content {height:auto;}
  }

  #table-wrapper {
  position:relative;
}
#table-scroll {
  height:250px;
  overflow:auto;  
  margin-top:20px;
}
#table-wrapper table {
  width:100%;

}
#table-wrapper table * {
  background:white;
  color:black;
}
#table-wrapper table thead th .text {
  position:absolute;   
  top:-20px;
  z-index:2;
  height:50px;
  width:35%;
  border:10px solid red;
}

</style>
</head>
<body>
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="/index.html">FootyStats</a>
      </div
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="/fixtures.html">Fixtures</a></li>
          <li><a href="/results.html">Results</a></li>
          <li><a href="/teams.html">Teams</a></li>
          <li><a href="/leagueTable.html">League Table</a></li>
          <li><a href="/vs.html">Head2Head</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
              <li class="active"><a href="/allStats.html">All Statistics</a></li>
            </ul>
          </div>
        </div>
      </nav>

                <div class="page-header">
                    <h1>All Statistics</h1>

 <!--------------------HOME WIN------------------------------------------------------------>                              
							        <form action="/allStats.html" method="POST">
							          <select name="homeWin">
								          <option value="0">Select</option>
										        <?php
											        while ($row = mysqli_fetch_array($resultSelectionHomeWin)) {
                                echo "<option value='" . $row['HomeTeam'] . "'>" . $row['HomeTeam'] . "</option>";
                                 }
                                 	if(isset($_POST['homeWin'])){
								                  	$selectedTeamH = $_POST['homeWin'];
                                    $selectedTeamH = mysqli_real_escape_string($conn, $_POST['homeWin']);
					                        }
									        ?>
							</select>
							<input type="submit" value="Submit">
							</form>
              <section>
              </div>
								<header>
									<h3><?php if($selectedTeamH != NULL ){
                                echo $selectedTeamH ." Home Wins"; }
                                else {
                                  echo "Please select a team to view home wins"; } ?></h3>
								</header>
                <section>
                <div id="table-wrapper">
                  <div id="table-scroll">
	                 <table class="table" id="results_table">
                  <thead>
                    <tr>
                    <th>Date</th>
                    <th>HomeTeam</th>
                    <th></th>
                    <th>AwayTeam</th>
                    <th colspan="3">Result</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
					            if(isset($_POST['homeWin'])){
								        $selectedTeamH = $_POST['homeWin'];
                      }
                     
                      $sqlH = "SELECT DISTINCT `Date`, `HomeTeam`, `AwayTeam`, `FTHG`, `FTAG`FROM `stats` WHERE `HomeTeam` ='$selectedTeamH' AND `FTR` = \"H\" ORDER BY `Date` ASC";
                      $resultH = $conn->query($sqlH);
                      while ($rows=mysqli_fetch_array($resultH)) { ?>
                    <tr>
                        <td><?php echo $rows['Date']; ?></td>
                        <td><?php echo $rows['HomeTeam']; ?></td>
                        <td>-</td>
                        <td><?php echo $rows['AwayTeam']; ?></td>
                        <td><?php echo $rows['FTHG']; ?></td>
                        <td>:</td>
                        <td><?php echo $rows['FTAG']; ?></td>
                    </tr>
                    <?php
                   } ?>
                    </tbody>
                </table>
       
        <script type="text/javascript">
            $(document).ready(function(){
                $('#results_table').DataTable(
                    {
                    }
                );
            });
      </script>
          </div>
        </div>
        </section>
        <section>
          <br>
 <!--------------------HOME LOSSES------------------------------------------------------------>  
        <form action="/allStats.html" method="POST">
							          <select name="homeLosses">
								          <option value="0">Select</option>
										        <?php
											        while ($row = mysqli_fetch_array($resultSelectionHomeLosses)) {
                                echo "<option value='" . $row['AwayTeam'] . "'>" . $row['AwayTeam'] . "</option>";
                                 }
                                 	if(isset($_POST['homeLosses'])){
								                  	$selectedTeamA = $_POST['homeLosses'];
                                    $selectedTeamA = mysqli_real_escape_string($conn, $_POST['homeLosses']);
					                        }
									        ?>
							</select>
							<input type="submit" value="Submit">
							</form>
              <section>
              </div>
								<header>
									<h3><?php if($selectedTeamA != NULL ){
                                echo $selectedTeamA ." Home Losses"; }
                                else {
                                  echo "Please select a team to view home losses"; } ?></h3>
								</header>
                <section>
                <div id="table-wrapper">
                  <div id="table-scroll">
	                 <table class="table" id="results_table">
                  <thead>
                    <tr>
                    <th>Date</th>
                    <th>HomeTeam</th>
                    <th></th>
                    <th>AwayTeam</th>
                    <th colspan="3">Result</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
					            if(isset($_POST['homeLosses'])){
								        $selectedTeamA = $_POST['homeLosses'];
                      }
                     
                      $sqlA = "SELECT DISTINCT `Date`, `HomeTeam`, `AwayTeam`, `FTHG`, `FTAG`FROM `stats` WHERE `HomeTeam` ='$selectedTeamA' AND `FTR` = \"A\" ORDER BY `Date` ASC";
                      $resultA = $conn->query($sqlA);
                      while ($rows=mysqli_fetch_array($resultA)) { ?>
                    <tr>
                        <td><?php echo $rows['Date']; ?></td>
                        <td><?php echo $rows['HomeTeam']; ?></td>
                        <td>-</td>
                        <td><?php echo $rows['AwayTeam']; ?></td>
                        <td><?php echo $rows['FTHG']; ?></td>
                        <td>:</td>
                        <td><?php echo $rows['FTAG']; ?></td>
                    </tr>
                    <?php
                   } ?>
                    </tbody>
                </table>
       
        <script type="text/javascript">
            $(document).ready(function(){
                $('#results_table').DataTable(
                    {
                    }
                );
            });
      </script>
          </div>
        </div>
        </section>
        <br>

 <!--------------------HOME DRAWS------------------------------------------------------------>  

        <form action="/allStats.html" method="POST">
							          <select name="homeDraw">
								          <option value="0">Select</option>
										        <?php
											        while ($row = mysqli_fetch_array($resultSelectionHomeDraw)) {
                                echo "<option value='" . $row['HomeTeam'] . "'>" . $row['HomeTeam'] . "</option>";
                                 }
                                 	if(isset($_POST['homeDraw'])){
								                  	$selectedTeamHomeDraw = $_POST['homeDraw'];
                                    $selectedTeamHomeDraw = mysqli_real_escape_string($conn, $_POST['homeDraw']);
					                        }
									        ?>
							</select>
							<input type="submit" value="Submit">
							</form>
              <section>
              </div>
								<header>
									<h3><?php if($selectedTeamHomeDraw != NULL ){
                                echo $selectedTeamHomeDraw ." Home Drawes"; }
                                else {
                                  echo "Please select a team to view home drawes"; } ?></h3>
								</header>
                <section>
                <div id="table-wrapper">
                  <div id="table-scroll">
	                 <table class="table" id="results_table">
                  <thead>
                    <tr>
                    <th>Date</th>
                    <th>HomeTeam</th>
                    <th></th>
                    <th>AwayTeam</th>
                    <th colspan="3">Result</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
					            if(isset($_POST['homeDraw'])){
								        $selectedTeamHomeDraw = $_POST['homeDraw'];
                      }
                     
                      $sqlHomeDraw = "SELECT DISTINCT `Date`, `HomeTeam`, `AwayTeam`, `FTHG`, `FTAG`FROM `stats` WHERE `HomeTeam` ='$selectedTeamHomeDraw' AND `FTR` = \"D\" ORDER BY `Date` ASC";
                      $resultHomeDraw = $conn->query($sqlHomeDraw);
                      while ($rows=mysqli_fetch_array($resultHomeDraw)) { ?>
                    <tr>
                        <td><?php echo $rows['Date']; ?></td>
                        <td><?php echo $rows['HomeTeam']; ?></td>
                        <td>-</td>
                        <td><?php echo $rows['AwayTeam']; ?></td>
                        <td><?php echo $rows['FTHG']; ?></td>
                        <td>:</td>
                        <td><?php echo $rows['FTAG']; ?></td>
                    </tr>
                    <?php
                   } ?>
                    </tbody>
                </table>
       
        <script type="text/javascript">
            $(document).ready(function(){
                $('#results_table').DataTable(
                    {
                    }
                );
            });
      </script>
          </div>
        </div>
        </section>
        <br>

 <!--------------------AWAY WINS------------------------------------------------------------>  
							        <form action="/allStats.html" method="POST">
							          <select name="awayWin">
								          <option value="0">Select</option>
										        <?php
											        while ($row = mysqli_fetch_array($resultSelectionAwayWin)) {
                                echo "<option value='" . $row['AwayTeam'] . "'>" . $row['AwayTeam'] . "</option>";
                                 }
                                 	if(isset($_POST['awayWin'])){
								                  	$selectedTeamAwayWin = $_POST['awayWin'];
                                    $selectedTeamAwayWin = mysqli_real_escape_string($conn, $_POST['awayWin']);
					                        }
									        ?>
							</select>
							<input type="submit" value="Submit">
							</form>
              <section>
              </div>
								<header>
									<h3><?php if($selectedTeamAwayWin != NULL ){
                                echo $selectedTeamAwayWin ." Away Wins"; }
                                else {
                                  echo "Please select a team to view away wins"; } ?></h3>
								</header>
                <section>
                <div id="table-wrapper">
                  <div id="table-scroll">
	                 <table class="table" id="results_table">
                  <thead>
                    <tr>
                    <th>Date</th>
                    <th>HomeTeam</th>
                    <th></th>
                    <th>AwayTeam</th>
                    <th colspan="3">Result</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
					            if(isset($_POST['awayWin'])){
								        $selectedTeamAwayWin = $_POST['awayWin'];
                      }
                     
                      $sqlAwayWin = "SELECT DISTINCT `Date`, `HomeTeam`, `AwayTeam`, `FTHG`, `FTAG`FROM `stats` WHERE `AwayTeam` ='$selectedTeamAwayWin' AND `FTR` = \"A\" ORDER BY `Date` ASC";
                      $resultAwayWin = $conn->query($sqlAwayWin);
                      while ($rows=mysqli_fetch_array($resultAwayWin)) { ?>
                    <tr>
                        <td><?php echo $rows['Date']; ?></td>
                        <td><?php echo $rows['HomeTeam']; ?></td>
                        <td>-</td>
                        <td><?php echo $rows['AwayTeam']; ?></td>
                        <td><?php echo $rows['FTHG']; ?></td>
                        <td>:</td>
                        <td><?php echo $rows['FTAG']; ?></td>
                    </tr>
                    <?php
                   } ?>
                    </tbody>
                </table>
       
        <script type="text/javascript">
            $(document).ready(function(){
                $('#results_table').DataTable(
                    {
                    }
                );
            });
      </script>
          </div>
        </div>
        </section>
        <section>
          <br>

 <!--------------------AWAY Drawes------------------------------------------------------------>  
        <form action="/allStats.html" method="POST">
							          <select name="awayDraw">
								          <option value="0">Select</option>
										        <?php
											        while ($row = mysqli_fetch_array($resultSelectionAwayDraw)) {
                                echo "<option value='" . $row['AwayTeam'] . "'>" . $row['AwayTeam'] . "</option>";
                                 }
                                 	if(isset($_POST['awayDraw'])){
								                  	$selectedTeamAwayDraw = $_POST['awayDraw'];
                                    $selectedTeamAwayDraw = mysqli_real_escape_string($conn, $_POST['awayDraw']);
					                        }
									        ?>
							</select>
							<input type="submit" value="Submit">
							</form>
              <section>
              </div>
								<header>
									<h3><?php if($selectedTeamAwayDraw != NULL ){
                                echo $selectedTeamAwayDraw ." Away Drawes"; }
                                else {
                                  echo "Please select a team to view away drawes"; } ?></h3>
								</header>
                <section>
                <div id="table-wrapper">
                  <div id="table-scroll">
	                 <table class="table" id="results_table">
                  <thead>
                    <tr>
                    <th>Date</th>
                    <th>HomeTeam</th>
                    <th></th>
                    <th>AwayTeam</th>
                    <th colspan="3">Result</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
					            if(isset($_POST['awayDraw'])){
								        $selectedTeamHomeDraw = $_POST['awayDraw'];
                      }
                     
                      $sqlAwayDraw = "SELECT DISTINCT `Date`, `HomeTeam`, `AwayTeam`, `FTHG`, `FTAG`FROM `stats` WHERE `AwayTeam` ='$selectedTeamAwayDraw' AND `FTR` = \"D\" ORDER BY `Date` ASC";
                      $resultAwayDraw = $conn->query($sqlAwayDraw);
                      while ($rows=mysqli_fetch_array($resultAwayDraw)) { ?>
                    <tr>
                        <td><?php echo $rows['Date']; ?></td>
                        <td><?php echo $rows['HomeTeam']; ?></td>
                        <td>-</td>
                        <td><?php echo $rows['AwayTeam']; ?></td>
                        <td><?php echo $rows['FTHG']; ?></td>
                        <td>:</td>
                        <td><?php echo $rows['FTAG']; ?></td>
                    </tr>
                    <?php
                   } ?>
                    </tbody>
                </table>
       
        <script type="text/javascript">
            $(document).ready(function(){
                $('#results_table').DataTable(
                    {
                    }
                );
            });
      </script>
          </div>
        </div>
        </section>
        <br>

         <!--------------------AWAY LOSSES------------------------------------------------------------>  
        <form action="/allStats.html" method="POST">
							          <select name="awayLosses">
								          <option value="0">Select</option>
										        <?php
											        while ($row = mysqli_fetch_array($resultSelectionAwayLosses)) {
                                echo "<option value='" . $row['AwayTeam'] . "'>" . $row['AwayTeam'] . "</option>";
                                 }
                                 	if(isset($_POST['awayDraw'])){
								                  	$selectedTeamAwayLosses = $_POST['awayLosses'];
                                    $selectedTeamAwayLosses = mysqli_real_escape_string($conn, $_POST['awayLosses']);
					                        }
									        ?>
							</select>
							<input type="submit" value="Submit">
							</form>
              <section>
              </div>
								<header>
									<h3><?php if($selectedTeamAwayLosses != NULL ){
                                echo $selectedTeamAwayLosses ." Away Losses"; }
                                else {
                                  echo "Please select a team to view away losses"; } ?></h3>
								</header>
                <section>
                <div id="table-wrapper">
                  <div id="table-scroll">
	                 <table class="table" id="results_table">
                  <thead>
                    <tr>
                    <th>Date</th>
                    <th>HomeTeam</th>
                    <th></th>
                    <th>AwayTeam</th>
                    <th colspan="3">Result</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
					            if(isset($_POST['awayLosses'])){
								        $selectedTeamAwayLosses = $_POST['awayLosses'];
                      }
                     
                      $sqlAwayLosses = "SELECT DISTINCT `Date`, `HomeTeam`, `AwayTeam`, `FTHG`, `FTAG`FROM `stats` WHERE `AwayTeam` ='$selectedTeamAwayLosses' AND `FTR` = \"H\" ORDER BY `Date` ASC";
                      $resultAwayLosses = $conn->query($sqlAwayLosses);
                      while ($rows=mysqli_fetch_array($resultAwayLosses)) { ?>
                    <tr>
                        <td><?php echo $rows['Date']; ?></td>
                        <td><?php echo $rows['HomeTeam']; ?></td>
                        <td>-</td>
                        <td><?php echo $rows['AwayTeam']; ?></td>
                        <td><?php echo $rows['FTHG']; ?></td>
                        <td>:</td>
                        <td><?php echo $rows['FTAG']; ?></td>
                    </tr>
                    <?php
                   } ?>
                    </tbody>
                </table>
       
        <script type="text/javascript">
            $(document).ready(function(){
                $('#results_table').DataTable(
                    {
                    }
                );
            });
      </script>
          </div>
        </div>
        </section>
        <br>

<!--------------------HEAD2HEAD------------------------------------------------------------>  
<form action="/allStats.html" method="POST">
							          <select name="homeHead">
								          <option value="0">Select</option>
										        <?php
											        while ($row = mysqli_fetch_array($resultSelectionHomeHead)) {
                                echo "<option value='" . $row['HomeTeam'] . "'>" . $row['HomeTeam'] . "</option>";
                                 }
                                 	if(isset($_POST['homeHead'])){
								                  	$selectedTeamHomeHead = $_POST['homeHead'];
                                    $selectedTeamHomeHead = mysqli_real_escape_string($conn, $_POST['homeHead']);
					                        } ?>
                          </select>
                          <select name="awayHead">
								            <option value="0">Select</option>
                              <?php
                                while ($row = mysqli_fetch_array($resultSelectionAwayHead)) {
                                  echo "<option value='" . $row['AwayTeam'] . "'>" . $row['AwayTeam'] . "</option>";
                                  }
                                    if(isset($_POST['awayHead'])){
                                      $selectedTeamAwayHead = $_POST['awayHead'];
                                      $selectedTeamAwayHead = mysqli_real_escape_string($conn, $_POST['awayHead']);
                                    } ?>
									        
							</select>
							<input type="submit" value="Submit">
							</form>
<section>
              </div>
								<header>
									<h3><?php if(($selectedTeamHomeHead AND $selectedTeamAwayHead) != NULL ){
                                echo $selectedTeamHomeHead ." vs ". $selectedTeamAwayHead; }
                                else {
                                  echo "Please select 2 teams to view the head to head"; } ?></h3>
								</header>
                <section>
                <div id="table-wrapper">
                  <div id="table-scroll">
	                 <table class="table" id="results_table">
                  <thead>
                    <tr>
                    <th>Date</th>
                    <th>HomeTeam</th>
                    <th></th>
                    <th>AwayTeam</th>
                    <th colspan="3">Result</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
					            if(isset($_POST['homeHead'])){
								        $selectedTeamHomeHead = $_POST['homeHead'];
                      }

                      if(isset($_POST['awayHead'])){
								        $selectedTeamAwayHead = $_POST['awayHead'];
                      }
                     
                      $sqlHead = "SELECT DISTINCT `Date`, `HomeTeam`, `AwayTeam`, `FTHG`, `FTAG`FROM `stats` WHERE `AwayTeam` ='$selectedTeamAwayHead' AND `FTR` = \"H\" ORDER BY `Date` ASC";
                      $resultHead = $conn->query($sqlHead);
                      while ($rows=mysqli_fetch_array($resultHead)) { ?>
                    <tr>
                        <td><?php echo $rows['Date']; ?></td>
                        <td><?php echo $rows['HomeTeam']; ?></td>
                        <td>-</td>
                        <td><?php echo $rows['AwayTeam']; ?></td>
                        <td><?php echo $rows['FTHG']; ?></td>
                        <td>:</td>
                        <td><?php echo $rows['FTAG']; ?></td>
                    </tr>
                    <?php
                   } ?>
                    </tbody>
                </table>
       
        <script type="text/javascript">
            $(document).ready(function(){
                $('#results_table').DataTable(
                    {
                    }
                );
            });
      </script>
          </div>
        </div>
        </section>





<br>
            <?php
            $conn->close(); 
            ?>
      <footer class="container-fluid text-center">
        <p>Footer Text</p>
      </footer>
    </body>
</html>
